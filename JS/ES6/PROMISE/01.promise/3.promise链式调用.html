<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <script>
    // 链式调用一
    /* new Promise((resolve, reject) => {
      // 第一次网络请求代码
      setTimeout(() => {
        // 网络请求成功的时候
        resolve('hello world')
        // 请求失败的时候
        reject('error message')
      }, 1000)
    })
      .then((data) => {
        // 第一次拿到结果处理代码
        console.log(data);
        console.log(data);
        console.log(data);

        return new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve('hello world2')
          })
        }).then((data2) => {
          console.log(data2);
          console.log(data2);
          console.log(data2);

          return new Promise((resolve, reject) => {
            setTimeout(() => {
              resolve('hello world3')
            })
          }).then((data3) => {
            console.log(data3);
            console.log(data3);
            console.log(data3);
          })
        })
      })
      .catch(err => {
        console.log(err);
      }) */




    // 链式调用二
    new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve('aaa')
      }, 1000)
    }).then(res => {
      // 自己处理
      console.log(res, '第一层处理代码');
      // 对结果进行第一次处理
      // return Promise.reject('error')
      throw 'error message'
        // resolve(res + '111')
        // reject('error')
      }).then(res2 => {
        console.log(res2, '第二层处理');
        return Promise.resolve(res2 + '222')
      }).then(res3 => {
        console.log(res3, '第三层处理');
      }).catch(err => {
        console.log(err);
      })


    /* 简写 */
    /* new Promise((resolve, reject) => {
      setTimeout(() => {
        resolve('aaa')
      }, 1000)
    }).then(res => {
      // 自己处理
      console.log(res, '第一层处理代码');
      return res + '111'
    }).then(res2 => {
      console.log(res2, '第二次处理');

      return res2 + '222'
    }).then(res3 => {
      console.log(res3, '第三次处理');
    }) */
  </script>
</body>

</html>